#!/usr/bin/env bash

us="us"
ca="ca -variant multix"
opt="-option compose:ralt" # Enable digraphs

layout=$1
current="$(setxkbmap -query | sed -rn 's/layout\:[ ]+(.*)$/\1/p')"

case "$layout" in
   -t|toggle)
      [ "$current" = "$us" ] && layout="$ca" || layout="$us"
      ;;
   "")
      echo "$current"; exit 
      ;;
esac

setxkbmap $layout $opt
setxkbmap -query | sed -rn 's/layout\:[ ]+(.*)$/\1/p'

